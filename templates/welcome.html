<!DOCTYPE html>
<html lang="en">
    <head>
        <title>StockSync.com | Dashboard</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="shortcut icon"
            type="image/x-icon"
            href="../static/icon.png"
        />
        <link rel="stylesheet" href="../static/welcome.css" />
        <script
            src="https://kit.fontawesome.com/e4cb96cad7.js"
            crossorigin="anonymous"
        ></script>
    </head>
    <body>
        <div>
            <nav>
                <div class="container">
                    <div class="nav-left">
                        <span>
                            <a href="/dashboard">
                                <img
                                    src="../static/icon.png"
                                    class="img-fluid rounded"
                                    width="40"
                                    height="40"
                                />
                            </a>
                        </span>
                        <span>
                            <a href="/graph" class="nav-link">Graph</a>
                            <a href="/filter" class="nav-link">Filter</a>
                        </span>
                    </div>
                    <div class="nav-left-2">
                        <span>
                            <a>{{username}}</a>
                        </span>
                    </div>
                    <a href="/logout" style="margin-right: 15px">
                        <img
                            src="../static/logout.png"
                            alt=""
                            width="20"
                            height="20"
                        />
                    </a>
                </div>
            </nav>
        </div>

        <div class="centered-header">
            <h1
                style="
                    width: 50vw;
                    margin: auto;
                    text-align: center;
                    font-size: 35pt;
                "
            >
                Favorites
            </h1>
        </div>
        <div class="container1">
            <form method="post" action="{{ url_for('dashboard') }}">
                <div class="row">
                    <div class="col-5">
                        <input
                            type="text"
                            name="new_favorite"
                            placeholder="Add a new favorite"
                            class="form-control"
                        />
                    </div>
                    <div class="col-1"></div>
                    <div class="col-3">
                        <button type="submit" class="btn-primary">Add</button>
                    </div>
                </div>
                <ul class="flash-container">
                    {% with messages = get_flashed_messages() %} {% if messages
                    %}
                    <ul class="flashed">
                        {% for message in messages %}
                        <li>{{ message }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %} {% endwith %}
                </ul>
            </form>
        </div>
        <div class="container2">
            {% if combined_array%}
            <div class="row3">
                {% for e1,e2,favorite in combined_array %}
                <div class="col3">
                    <form
                        method="post"
                        action="{{ url_for('remove_favorite', favorite=favorite) }}"
                    >
                        <div class="card-body">
                            <h5 class="card-title">{{ favorite }}</h5>
                            {% if e2|float > 0%}
                            <div
                                style="
                                    color: #006400;
                                    font-weight: bold;
                                    font-size: 30px;
                                    margin: auto;
                                    text-align: center;
                                "
                            >
                                {{e2|float}}%
                                <i class="fa-solid fa-arrow-trend-up"></i>
                            </div>
                            {% else%}
                            <div
                                style="
                                    color: #58151c;
                                    font-weight: bold;
                                    font-size: 30px;
                                    margin: auto;
                                    text-align: center;
                                "
                            >
                                {{e2}}%
                                <i class="fa-solid fa-arrow-trend-down"></i>
                            </div>
                            {%endif%}
                            <button type="submit" class="remove-button">
                                &#10006;
                            </button>
                        </div>
                    </form>
                </div>
                {% endfor %}
            </div>
            {%else%}
            <div class="empty">No stocks in Your Favorites</div>
            {%endif%}
        </div>
    </body>
</html>
